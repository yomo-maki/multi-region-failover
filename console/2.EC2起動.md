# EC2起動
### EC2を起動させ、アクセスするためのEIPを割り当てる。
AWSマネジメントコンソールの操作にて行います。  
○○作成からと記載がありますが、「EC2ダッシュボード」からそれぞれのメニューへと遷移することができ、サイドメニューから選択すると中央の画面（右上）に○○作成と表示があるためそこから操作を実施する。

- 「VPC構築」で作成したパブリックサブネットにEC2をアタッチします。
- EC2起動時に「VPC構築」の時に作成したセキュリティグループを適用します。
- EC2にアクセスするためのEIPを割り当てます。

<br>

# 手順  

### 1. EC2起動  
  コンソールのインスタンスを起動から、以下のように設定しEC2を起動する。

  ```
    ・名前：｛任意｝
    ・アプリケーションおよびOSイメージ（Amazon マシーンイメージ）
      ・Amazon マシーンイメージ（AMI）：Amazon Linux 2023 AMI  
      ・アーキテクチャー：64ビット(x86)
    ・インスタンスタイプ：t2.micro
    ・キーペア：{任意}　もっていない場合は、以下
      「新しいキーペアの作成」
        ・ キーペア名：｛任意｝
        ・ キーペアのタイプ：RSA
        ・プライベートキーファイル形式：.pem
    ・ネットワーク設定
      ・VPC：「VPC構築」で作成したVPC
      ・サブネット：「VPC構築」で作成したサブネット
      ・パブリックIP自動割り当て：無効化
      ・ファイアウォール：「VPC構築」で作成したセキュリティグループ
    ・ストレージを設定
      デフォルトのまま
    その他はデフォルトのまま「インスタンスを起動」を押下
  ```
<img src="images\ec2-1.png">
作成すると起動中の状態となります。
これ以降、すぐに作業することがなければ、作成したインスタンスを選択し、画面上部の「インスタンスの状態」を押下＞「インスタンスを停止」を押下し停止しておいてもいいかもです。

### 2. EIP割り当て  
  この状態ではEC2にアクセスできないので今回はSSHアクセス用のパブリックIPを使うためにEIPを割り当てしEC2に関連付けする。

  1. EIP割り当て  
    コンソールのElastic IP＞「Elastic IP アドレスを割り当てる」から、以下のように設定しEIP割り当てを行う。
  ```
    ・パブリックIPv4 アドレスプール：AmazonのIPv4アドレスプール
    その他はデフォルトのまま
  ```
  2. EC2に関連付け
    以下画像のように、割り当てたEIPを選択して、EIPの関連付けを選択する。
    <img src="images\ec2-2.png">
    以下のように設定しEC2に関連付けする。
      ```
        ・リソースタイプ：インスタンス
        ・インスタンス：1で作成したEC2
       その他はデフォルトのまま
      ```  

      完了後、「関連付けされたインスタンスID」に1で作成したEC2が反映されていれば完了です。


## 注意点　EC2、EIPは料金が発生します。
このまま作業を進めるのであればこのままでいいのですが、一旦手を止めるのであれば以下を行っておくことをお勧めします。
- EC2: 停止する。  
- EIP: 関連付けを解除し、EIPを解放する。

作業再開時は、以下を行う。
- EIP：再度2. EIP割り当ての手順を行う。
- EC2: 起動する。  


### 以上でEC2起動は終わりとなります。次はEC2へアクセスして初期設定を行います。


